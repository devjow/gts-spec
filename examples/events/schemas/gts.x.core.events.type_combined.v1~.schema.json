{
  "$id": "gts://gts.x.core.events.type_combined.v1~",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Event Envelope (Combined Anonymous Instance ID)",
  "type": "object",
  "description": "Base event type definition (combined anonymous instance id)",
  "required": [
    "id",
    "tenantId",
    "occurredAt"
  ],
  "x-event-type-settings": {
    "additionalProperties": false,
    "topicRef": {
      "description": "ID of the topic where events of this type are stored.",
      "type": "string",
      "x-gts-ref":"gts.x.core.events.topic.v1~"
    }
  },
  "properties": {
    "$schema": {
      "description": "Link to the event type schema.",
      "type": "string"
    },
    "id": {
      "description": "GTS instance identifier including the type chain and instance UUID.",
      "type": "string",
      "x-gts-ref": "gts.x.core.events.type_combined.v1~*"
    },
    "tenantId": {
      "type": "string",
      "format": "uuid",
      "description": "The id of the tenant that produced the event. Mandatory"
    },
    "userId": {
      "type": "string",
      "format": "uuid",
      "description": "The id of the user that produced the event. Optional"
    },
    "clientId": {
      "type": "string",
      "format": "uuid",
      "description": "The id of the API client that produced the event. Optional"
    },
    "source": {
      "description": "Full SemVer of the event type schema used to produce this event.",
      "type": "string",
      "maxLength": 256
    },
    "occurredAt": {
      "type": "string",
      "format": "date-time",
      "description": "The time the event occurred. Fully controlled by the producer"
    },
    "ingestedAt": {
      "type": "string",
      "format": "date-time",
      "description": "The time the event was ingested into the event store.",
      "readOnly": true
    },
    "sequenceNumber": {
      "type": "number",
      "description": "The sequence number of the event in the stream."
    },
    "previousSequenceNumber": {
      "type": "number",
      "description": "The sequence number of the previous event in the same stream."
    },
    "payload": {
      "description": "Type-specific body; see event type schema.",
      "type": "object"
    },
    "subject": {
      "description": "The subject of the event.",
      "type": "string"
    },
    "subjectType": {
      "description": "GTS type of the subject of the event.",
      "type": "string",
      "x-gts-ref": "gts.*",
      "$comment": "The value is mandatory if subject is present"
    }
  },
  "additionalProperties": false
}
